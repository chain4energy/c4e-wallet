<template>
  <div class="airDropTotal">
    <div class="airDropTotal__container">
      <Button @click="dataService.onKeplrLogIn()" v-if="!userLoggedIn"  class="airDropTotal-btn"><KeplrLogo/> {{ $t('AIRDROP.CONNECT' )}} </Button>
      <hr class="airDropTotal__hr" v-if="!userLoggedIn" :data-after="$t('AIRDROP.OR')"/>
      <div class="airDropTotal__head">
        <Form @submit="submit" class="loginEmail__body airDropTotal__form" :validation-schema="amountSchema" v-slot="{ errors }">
          <div class="field">
            <Field  v-model="address" name="address" placeholder=" " type="text" class=" form-control" :class="{ 'is-invalid': errors.address }"></Field>
            <span>{{$t('AIRDROP.C4E_HELP')}}</span>
            <div class="invalid-feedback">
              {{ errors.address ? errors.address : "" }}
            </div>
          </div>
          <Button type="submit" class="airDropTotal__head-btn">{{ $t('COMMON.CONNECT')}}</Button>
        </Form>
        <div class="airDropTotal__totalData">
          <h4>Total Fairdrop allocation</h4>
          <div class="airDropTotal__totalData-item">
            <div class="airDropTotal__totalData-image">
              <Image class="navbar-brand" :src="require('@/assets/c4elogo-new.svg')" alt="Image" height="58" />
            </div>
            <CoinAmount
              class="airDropTotal__totalData-amount"
              :amount="airDrops?.campains ? airDrops.getTotal() : 0" :precision="2"
              :show-denom="true"
              :reduce-big-number="true"
            />
          </div>
        </div>
      </div>
      <hr class="airDropTotal__head-hr"/>
      <div class="airDropTotal__content" v-if="airDrops">
        <div class="airDropTotal__content-items" v-for="campains in airDrops.campains" :key="campains">
          <div class="airDropTotal__content-header">
            <h5>{{campains.name}}</h5>
            <a :href="campains.details_url" target="_blank">details</a>
          </div>
          <div class="airDropTotal__content-content" v-for="allocations in campains.alocations" :key="allocations">
            <p>{{allocations.name}}</p>
            <CoinAmount :amount="allocations.value" :precision="2" :show-denom="true"></CoinAmount>
          </div>
        </div>
      </div>
      <hr v-if="airDrops && airDrops.campaigns" class="airDropTotal__head-hr"/>
      <div class="airDropTotal__footer">
        <p>What's Next? Follow Us for Updates.</p>
        <p>Connect with us to stay up-to-date on mainnet launch and what's next for C4E.</p>
        <div class="airDropTotal__footer-icons">
          <a href="https://t.me/chain4energy" target="_blank" class="airDropTotal__footerIcon">
            <svg width="28" height="25" viewBox="0 0 28 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M25.3907 0.00227399C24.9897 0.0197156 24.6218 0.135036 24.2985 0.262441C23.9999 0.380049 22.9275 0.830782 21.2199 1.54702C19.5123 2.26325 17.2495 3.21289 14.8377 4.22728C10.0139 6.25606 4.59328 8.53819 1.81575 9.70705C1.72037 9.74679 1.333 9.86538 0.905165 10.1922C0.476339 10.5197 0 11.2305 0 12.0079C0 12.635 0.313052 13.2737 0.691069 13.6394C1.06909 14.005 1.4522 14.176 1.77239 14.3033V14.3006C2.85472 14.7318 6.08692 16.0252 6.85649 16.3332C7.12946 17.1512 8.30132 20.6532 8.5801 21.5338H8.57739C8.77444 22.1571 8.9665 22.5633 9.23322 22.9024C9.36658 23.0719 9.52577 23.2256 9.72104 23.3469C9.79596 23.3934 9.87891 23.4295 9.96223 23.4634C9.97384 23.4683 9.98581 23.4695 9.99746 23.4742L9.96494 23.4661C9.9891 23.4758 10.0108 23.4901 10.0354 23.4986C10.0755 23.5124 10.1033 23.512 10.1574 23.523C10.3475 23.5815 10.5372 23.6206 10.7129 23.6206C11.4672 23.6206 11.9297 23.2114 11.9297 23.2114L11.9596 23.1897L15.2171 20.4335L19.2063 24.1246C19.2792 24.2275 19.85 25 21.1711 25C21.9594 25 22.5827 24.6098 22.9814 24.2005C23.3802 23.7913 23.6286 23.3725 23.7403 22.8048L23.743 22.8021C23.832 22.344 27.6509 3.16764 27.6509 3.16764L27.6428 3.20016C27.7616 2.66964 27.7967 2.15658 27.6563 1.63374C27.5159 1.1109 27.137 0.600659 26.6807 0.332903C26.2244 0.0651476 25.7916 -0.0151682 25.3907 0.00227399ZM24.8433 3.04027C24.6923 3.79792 21.2714 20.9842 21.06 22.0623L15.2984 16.7316L11.404 20.0243L12.4826 15.8074C12.4826 15.8074 19.9234 8.27557 20.3716 7.8371C20.7324 7.48605 20.808 7.36299 20.808 7.24088C20.808 7.07854 20.7244 6.96175 20.5315 6.96175C20.3581 6.96175 20.1225 7.12795 19.9976 7.20565C18.4108 8.19499 11.6518 12.0467 8.32806 13.9375C8.12803 13.8573 5.12493 12.6514 3.50684 12.0052C6.385 10.7939 11.3187 8.71813 15.9136 6.78559C18.325 5.77137 20.5871 4.82088 22.2931 4.10533C23.7331 3.50131 24.4843 3.18856 24.8433 3.04027ZM21.0193 22.2601H21.022L21.0193 22.2682C21.0211 22.2593 21.018 22.2671 21.0193 22.2601Z" fill="black"/>
          </svg>
          </a>
          <a href="https://discord.com/invite/chain4energy" target="_blank" class="airDropTotal__footerIcon">
            <svg width="34" height="25" viewBox="0 0 34 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.7037 1.91447C13.4404 1.18248 13.1746 0.444451 13.1698 0.434788C13.043 0.15093 12.7495 -0.0278409 12.4402 0.00356469C12.2446 0.0192675 7.61465 0.417877 4.64803 2.80349C3.09707 4.23607 0 12.6117 0 19.8531C0 19.9811 0.0326136 20.1056 0.0966327 20.2167C2.23584 23.9733 8.06761 24.9565 9.39631 24.9988C9.40477 25 9.41202 25 9.41926 25C9.6536 25 9.87344 24.8877 10.0136 24.698L11.451 22.7509C9.07622 22.3897 8.64741 21.9186 8.54715 21.8449C8.01084 21.45 7.61465 20.8967 8.0954 20.1986C8.46502 19.6562 9.24049 19.4774 9.83478 19.783C10.4436 20.0669 12.073 20.9801 16.9107 20.9559C21.7146 20.9414 23.8236 19.9352 23.8538 19.9135C24.6606 19.5499 25.29 19.6997 25.6825 20.2384C26.15 20.9716 25.8166 21.4681 25.2827 21.8619C25.1825 21.9355 24.9397 22.1421 22.3886 22.746L23.8079 24.6968C23.9468 24.8877 24.1678 24.9988 24.4021 24.9988C24.4106 24.9988 24.4179 24.9988 24.4251 24.9976C25.755 24.9553 31.5868 23.9721 33.7248 20.2155C33.7888 20.1044 33.8214 19.9799 33.8214 19.8519C33.8214 12.6117 30.7243 4.23607 29.1347 2.77209C26.2068 0.419085 21.5769 0.0204754 21.3812 0.00356469C21.0719 -0.0230093 20.7784 0.152138 20.6516 0.434788C20.6468 0.444451 20.3883 1.19456 20.1382 1.9181C20.1382 1.9181 18.1681 1.62941 16.9107 1.62941C15.6533 1.62941 13.7037 1.91447 13.7037 1.91447ZM12.0791 17.3322C10.7443 17.3322 9.66326 15.7221 9.66326 13.7338C9.66326 11.7456 10.7443 10.1355 12.0791 10.1355C13.4186 9.93619 14.4659 11.7456 14.4949 13.7338C14.4949 15.7221 13.4138 17.3322 12.0791 17.3322ZM21.7423 17.3322C20.4076 17.3322 19.3265 15.7112 19.3265 13.7121C19.3265 11.713 20.4076 10.092 21.7423 10.092C23.0771 10.092 24.1582 11.713 24.1582 13.7121C24.1582 15.7112 23.0771 17.3322 21.7423 17.3322Z" fill="black"/>
          </svg>
          </a>
          <a href="https://twitter.com/chain4energy" target="_blank" class="airDropTotal__footerIcon">
            <svg width="32" height="25" viewBox="0 0 32 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M31.2481 0C30.0294 0.723392 27.5842 1.70927 26.1468 1.99363C26.1046 2.00456 26.0702 2.01862 26.0296 2.02956C24.7594 0.776514 23.0189 0 21.0924 0C17.2099 0 14.0616 3.14824 14.0616 7.03081C14.0616 7.23548 14.0444 7.61202 14.0616 7.81201C8.82289 7.81201 4.83564 5.06843 1.97644 1.5624C1.66552 2.3436 1.52959 3.5779 1.52959 4.7372C1.52959 6.92613 3.24042 9.076 5.90432 10.4087C5.41372 10.5353 4.87313 10.6259 4.31067 10.6259C3.40291 10.6259 2.44204 10.3869 1.5624 9.6619C1.5624 9.68846 1.5624 9.71346 1.5624 9.74158C1.5624 12.8008 4.80907 14.8834 7.69639 15.4631C7.11049 15.8084 5.92932 15.8428 5.35279 15.8428C4.94657 15.8428 3.50916 15.6568 3.1248 15.585C3.92788 18.0926 6.82457 19.5019 9.58534 19.5519C7.4261 21.2455 5.92775 21.8736 1.50616 21.8736H0C2.79358 23.6641 6.35117 25 9.91657 25C21.5252 25 28.1232 16.1521 28.1232 7.81201C28.1232 7.67764 28.1201 7.39641 28.1154 7.11362C28.1154 7.08549 28.1232 7.05893 28.1232 7.03081C28.1232 6.98863 28.1107 6.948 28.1107 6.90582C28.1061 6.69333 28.1014 6.49491 28.0967 6.39179C29.331 5.50122 30.4012 4.39035 31.2481 3.1248C30.1153 3.6279 28.8998 3.96538 27.6233 4.11849C28.9263 3.33729 30.7778 1.47491 31.2481 0Z" fill="black"/>
          </svg>
          </a>
          <a href="https://medium.com/chain4-energy" target="_blank" class="airDropTotal__footerIcon">
            <svg width="32" height="25" viewBox="0 0 32 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3.73413 5.10002C3.7733 4.71346 3.62594 4.33127 3.33724 4.07117L0.396889 0.529124V0H9.52644L16.5832 15.4762L22.7873 0L31.4903 6.14708e-05V0.529124L28.9764 2.93943C28.7596 3.10457 28.6521 3.37623 28.6971 3.64501V21.3551C28.6521 21.6238 28.7596 21.8954 28.9764 22.0606L31.4315 24.4709V25H19.0825V24.4709L21.6257 22.0017C21.8757 21.7519 21.8757 21.6784 21.8757 21.2964V6.98126L14.8043 24.9411H13.8488L5.61586 6.98126V19.0183C5.54734 19.5243 5.71537 20.0339 6.07161 20.3998L9.37957 24.412V24.9411H0V24.412L3.30796 20.3998C3.66155 20.0332 3.81974 19.5202 3.73413 19.0183V5.10002Z" fill="black"/>
          </svg>
          </a>
          <a href="https://c4e.io" target="_blank" class="airDropTotal__footerIcon">
            <svg width="30" height="31" viewBox="0 0 30 31" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.9292 29.1998C12.1689 29.1928 9.47252 28.36 7.18074 26.8064C4.88895 25.2529 3.10456 23.0484 2.05298 20.4713C1.00141 17.8943 0.729847 15.0604 1.27259 12.3276C1.81531 9.59483 3.14799 7.08577 5.10228 5.11738C7.05657 3.14898 9.54479 1.80957 12.2526 1.26837C14.9603 0.727166 17.7664 1.00844 20.316 2.07666C22.8653 3.14487 25.0444 4.9521 26.5771 7.27004C28.1101 9.58798 28.9282 12.3127 28.9282 15.0999C28.919 18.8426 27.4399 22.4289 24.8156 25.0721C22.1913 27.7154 18.636 29.1998 14.9292 29.1998ZM14.9292 2.07826C12.3799 2.08444 9.88966 2.85338 7.77299 4.28797C5.65629 5.72254 4.0082 7.75841 3.03684 10.1383C2.06552 12.5183 1.81453 15.1355 2.31564 17.6594C2.81672 20.1832 4.04739 22.5005 5.85218 24.3185C7.65695 26.1365 9.95489 27.3736 12.4556 27.8735C14.9565 28.3734 17.5477 28.1137 19.9025 27.1272C22.257 26.1407 24.2695 24.4717 25.685 22.331C27.1007 20.1903 27.8562 17.6739 27.8562 15.0999C27.8482 11.6434 26.4826 8.33142 24.0592 5.8903C21.6358 3.44916 18.3525 2.07825 14.9292 2.07826Z" fill="black"/>
            <path d="M14.9292 1.93262H14.9289C12.3512 1.93887 9.83313 2.71639 7.69278 4.167C5.55246 5.6176 3.88592 7.67622 2.90371 10.0828C1.92149 12.4894 1.66771 15.1359 2.17441 17.688C2.68114 20.2402 3.92558 22.5834 5.75054 24.4217C7.5755 26.26 9.89909 27.5109 12.4277 28.0164C14.9563 28.5219 17.5768 28.2593 19.9576 27.2618C22.3386 26.2643 24.3733 24.5767 25.8049 22.412C27.2365 20.2474 28.0004 17.7028 28.0004 15.0999V15.0995C27.9923 11.6045 26.6114 8.25549 24.1609 5.78713C21.7104 3.31877 18.3906 1.93261 14.9292 1.93262ZM14.9298 29.0541C12.1978 29.0472 9.52916 28.223 7.26101 26.6855C4.99288 25.148 3.22694 22.9662 2.18622 20.4158C1.14554 17.8654 0.876774 15.0608 1.4139 12.3563C1.95103 9.65178 3.26993 7.16865 5.20402 5.22059C7.13814 3.27252 9.60068 1.94692 12.2806 1.4113C14.9606 0.875668 17.7376 1.15405 20.2607 2.21125C22.7841 3.26845 24.9404 5.05703 26.4573 7.35103C27.9744 9.64493 28.7839 12.3413 28.7841 15.0995C28.7749 18.8036 27.3114 22.3529 24.7139 24.969C22.1167 27.5849 18.598 29.054 14.9298 29.0541Z" fill="black" stroke="black" stroke-opacity="0.2"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.58312 5.70861C7.58312 6.17222 7.4482 6.62542 7.1954 7.01089C6.94263 7.39639 6.58332 7.69682 6.16295 7.87424C5.74259 8.05167 5.28001 8.09808 4.83376 8.00762C4.38749 7.91718 3.97755 7.69393 3.65582 7.36609C3.33409 7.03828 3.11498 6.62061 3.02623 6.16592C2.93744 5.7112 2.983 5.2399 3.15714 4.81158C3.33124 4.38326 3.62612 4.01716 4.00444 3.7596C4.38276 3.50203 4.82757 3.36456 5.28257 3.36456C5.89272 3.36456 6.47786 3.61152 6.90932 4.05113C7.34075 4.4907 7.58312 5.08692 7.58312 5.70861Z" fill="black"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15.3249 28.6559C15.3249 29.1195 15.1901 29.5727 14.9371 29.9581C14.6843 30.3438 14.325 30.6441 13.9046 30.8216C13.4844 30.999 13.0217 31.0453 12.5755 30.955C12.1292 30.8644 11.7193 30.6412 11.3976 30.3135C11.0758 29.9855 10.8567 29.5679 10.768 29.1132C10.6792 28.6585 10.7247 28.1872 10.8989 27.7588C11.073 27.3305 11.3679 26.9644 11.7462 26.7069C12.1245 26.4493 12.5693 26.3118 13.0243 26.3118C13.6346 26.3118 14.2195 26.5588 14.6509 26.9984C15.0826 27.438 15.3249 28.0342 15.3249 28.6559Z" fill="black"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M29.4617 10.3175C29.4617 10.7811 29.3268 11.2343 29.0741 11.6198C28.8214 12.0052 28.4621 12.3057 28.0416 12.4831C27.6212 12.6605 27.1587 12.707 26.7124 12.6165C26.2663 12.5261 25.8562 12.3028 25.5344 11.975C25.2128 11.6472 24.9938 11.2295 24.905 10.7748C24.816 10.3201 24.8618 9.84879 25.0358 9.42046C25.2099 8.99214 25.5047 8.62605 25.883 8.36847C26.2614 8.1109 26.7063 7.97345 27.1613 7.97345C27.7713 7.97345 28.3566 8.22042 28.788 8.65999C29.2193 9.09959 29.4617 9.69581 29.4617 10.3175Z" fill="white"/>
            <path d="M18.5919 22.9129C19.5446 22.4283 20.399 21.7657 21.111 20.9595V9.41112C20.3998 8.60386 19.5451 7.94106 18.5919 7.45776V14.611H10.9504V7.51635C10.0027 8.01471 9.15487 8.68913 8.45044 9.50487V15.9042C8.45073 16.0743 8.48329 16.2427 8.54631 16.4003C8.60887 16.5525 8.69857 16.6916 8.81087 16.8105C8.92158 16.9233 9.05151 17.0146 9.19429 17.0801C9.35246 17.1512 9.52369 17.1872 9.69658 17.1855H18.5766L18.5919 22.9129Z" fill="black"/>
            <path d="M14.9292 1.93262H14.9289C12.3512 1.93887 9.83313 2.71639 7.69278 4.167C5.55246 5.6176 3.88592 7.67622 2.90371 10.0828C1.92149 12.4894 1.66771 15.1359 2.17441 17.688C2.68114 20.2402 3.92558 22.5834 5.75054 24.4217C7.5755 26.26 9.89909 27.5109 12.4277 28.0164C14.9563 28.5219 17.5768 28.2593 19.9576 27.2618C22.3386 26.2643 24.3733 24.5767 25.8049 22.412C27.2365 20.2474 28.0004 17.7028 28.0004 15.0999V15.0995C27.9923 11.6045 26.6114 8.25549 24.1609 5.78713C21.7104 3.31877 18.3906 1.93261 14.9292 1.93262ZM14.9298 29.0541C12.1978 29.0472 9.52916 28.223 7.26101 26.6855C4.99288 25.148 3.22694 22.9662 2.18622 20.4158C1.14554 17.8654 0.876774 15.0608 1.4139 12.3563C1.95103 9.65178 3.26993 7.16865 5.20402 5.22059C7.13814 3.27252 9.60068 1.94692 12.2806 1.4113C14.9606 0.875668 17.7376 1.15405 20.2607 2.21125C22.7841 3.26845 24.9404 5.05703 26.4573 7.35103C27.9744 9.64493 28.7839 12.3413 28.7841 15.0995C28.7749 18.8036 27.3114 22.3529 24.7139 24.969C22.1167 27.5849 18.598 29.054 14.9298 29.0541Z" fill="black" stroke="black" stroke-opacity="0.2"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.58312 5.70861C7.58312 6.17222 7.4482 6.62542 7.1954 7.01089C6.94263 7.39639 6.58332 7.69682 6.16295 7.87424C5.74259 8.05167 5.28001 8.09808 4.83376 8.00762C4.38749 7.91718 3.97755 7.69393 3.65582 7.36609C3.33409 7.03828 3.11498 6.62061 3.02623 6.16592C2.93744 5.7112 2.983 5.2399 3.15714 4.81158C3.33124 4.38326 3.62612 4.01716 4.00444 3.7596C4.38276 3.50203 4.82757 3.36456 5.28257 3.36456C5.89272 3.36456 6.47786 3.61152 6.90932 4.05113C7.34075 4.4907 7.58312 5.08692 7.58312 5.70861Z" fill="black"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15.3249 28.6559C15.3249 29.1195 15.1901 29.5727 14.9371 29.9581C14.6843 30.3438 14.325 30.6441 13.9046 30.8216C13.4844 30.999 13.0217 31.0453 12.5755 30.955C12.1292 30.8644 11.7193 30.6412 11.3976 30.3135C11.0758 29.9855 10.8567 29.5679 10.768 29.1132C10.6792 28.6585 10.7247 28.1872 10.8989 27.7588C11.073 27.3305 11.3679 26.9644 11.7462 26.7069C12.1245 26.4493 12.5693 26.3118 13.0243 26.3118C13.6346 26.3118 14.2195 26.5588 14.6509 26.9984C15.0826 27.438 15.3249 28.0342 15.3249 28.6559Z" fill="black"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M29.4617 10.3175C29.4617 10.7811 29.3268 11.2343 29.0741 11.6198C28.8214 12.0052 28.4621 12.3057 28.0416 12.4831C27.6212 12.6605 27.1587 12.707 26.7124 12.6165C26.2663 12.5261 25.8562 12.3028 25.5344 11.975C25.2128 11.6472 24.9938 11.2295 24.905 10.7748C24.816 10.3201 24.8618 9.84879 25.0358 9.42046C25.2099 8.99214 25.5047 8.62605 25.883 8.36847C26.2614 8.1109 26.7063 7.97345 27.1613 7.97345C27.7713 7.97345 28.3566 8.22042 28.788 8.65999C29.2193 9.09959 29.4617 9.69581 29.4617 10.3175Z" fill="black"/>
            <path d="M18.5919 22.9129C19.5446 22.4283 20.399 21.7657 21.111 20.9595V9.41112C20.3998 8.60386 19.5451 7.94106 18.5919 7.45776V14.611H10.9504V7.51635C10.0027 8.01471 9.15487 8.68913 8.45044 9.50487V15.9042C8.45073 16.0743 8.48329 16.2427 8.54631 16.4003C8.60887 16.5525 8.69857 16.6916 8.81087 16.8105C8.92158 16.9233 9.05151 17.0146 9.19429 17.0801C9.35246 17.1512 9.52369 17.1872 9.69658 17.1855H18.5766L18.5919 22.9129Z" fill="black"/>
            <path d="M14.9292 1.93262C12.3515 1.93887 9.83313 2.71639 7.69278 4.167C5.55246 5.6176 3.88592 7.67622 2.90371 10.0828C1.92149 12.4894 1.66771 15.1359 2.17441 17.688C2.68114 20.2402 3.92558 22.5834 5.75054 24.4217C7.5755 26.2601 9.89909 27.5109 12.4277 28.0164C14.9563 28.5219 17.5768 28.2593 19.9576 27.2618C22.3386 26.2643 24.3733 24.5767 25.8049 22.412C27.2364 20.2474 28.0004 17.7028 28.0004 15.0999C27.9923 11.6048 26.6114 8.25549 24.1609 5.78713C21.7104 3.31877 18.3906 1.93261 14.9292 1.93262ZM14.9298 29.0541C12.1978 29.0473 9.52916 28.223 7.26101 26.6855C4.99288 25.148 3.22694 22.9662 2.18622 20.4158C1.14554 17.8654 0.876774 15.0608 1.4139 12.3563C1.95103 9.65178 3.26993 7.16865 5.20402 5.22059C7.13814 3.27252 9.60068 1.94692 12.2806 1.4113C14.9606 0.875668 17.7376 1.15405 20.2607 2.21125C22.7841 3.26845 24.9404 5.05703 26.4573 7.35103C27.9744 9.64494 28.7839 12.3413 28.7841 15.0995C28.7749 18.8036 27.3114 22.3529 24.7139 24.969C22.1167 27.5849 18.598 29.054 14.9298 29.0541Z" fill="black" stroke="black" stroke-opacity="0.2"/>
            <path d="M14.9292 1.93262C12.3515 1.93887 9.83313 2.71639 7.69278 4.167C5.55246 5.6176 3.88592 7.67622 2.90371 10.0828C1.92149 12.4894 1.66771 15.1359 2.17441 17.688C2.68114 20.2402 3.92558 22.5834 5.75054 24.4217C7.5755 26.2601 9.89909 27.5109 12.4277 28.0164C14.9563 28.5219 17.5768 28.2593 19.9576 27.2618C22.3386 26.2643 24.3733 24.5767 25.8049 22.412C27.2364 20.2474 28.0004 17.7028 28.0004 15.0999C27.9923 11.6048 26.6114 8.25549 24.1609 5.78713C21.7104 3.31877 18.3906 1.93261 14.9292 1.93262ZM14.9298 29.0541C12.1978 29.0473 9.52916 28.223 7.26101 26.6855C4.99288 25.148 3.22694 22.9662 2.18622 20.4158C1.14554 17.8654 0.876774 15.0608 1.4139 12.3563C1.95103 9.65178 3.26993 7.16865 5.20402 5.22059C7.13814 3.27252 9.60068 1.94692 12.2806 1.4113C14.9606 0.875668 17.7376 1.15405 20.2607 2.21125C22.7841 3.26845 24.9404 5.05703 26.4573 7.35103C27.9744 9.64494 28.7839 12.3413 28.7841 15.0995C28.7749 18.8036 27.3114 22.3529 24.7139 24.969C22.1167 27.5849 18.598 29.054 14.9298 29.0541Z" fill="black" stroke="black" stroke-opacity="0.2"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.58312 5.70861C7.58312 6.17222 7.4482 6.62542 7.1954 7.01089C6.94263 7.39639 6.58332 7.69682 6.16295 7.87424C5.74259 8.05167 5.28001 8.09808 4.83376 8.00762C4.38749 7.91718 3.97755 7.69393 3.65582 7.36609C3.33409 7.03828 3.11498 6.62061 3.02623 6.16592C2.93744 5.7112 2.983 5.2399 3.15714 4.81158C3.33124 4.38326 3.62612 4.01716 4.00444 3.7596C4.38276 3.50203 4.82757 3.36456 5.28257 3.36456C5.89272 3.36456 6.47786 3.61152 6.90932 4.05113C7.34075 4.4907 7.58312 5.08692 7.58312 5.70861Z" fill="black"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15.3249 28.6559C15.3249 29.1195 15.1901 29.5727 14.9371 29.9581C14.6843 30.3438 14.325 30.6441 13.9046 30.8216C13.4844 30.999 13.0217 31.0453 12.5755 30.955C12.1292 30.8644 11.7193 30.6412 11.3976 30.3135C11.0758 29.9855 10.8567 29.5679 10.768 29.1132C10.6792 28.6585 10.7247 28.1872 10.8989 27.7588C11.073 27.3305 11.3679 26.9644 11.7462 26.7069C12.1245 26.4493 12.5693 26.3118 13.0243 26.3118C13.6346 26.3118 14.2195 26.5588 14.6509 26.9984C15.0826 27.438 15.3249 28.0342 15.3249 28.6559Z" fill="black"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M29.4617 10.3175C29.4617 10.7811 29.3268 11.2343 29.0741 11.6198C28.8214 12.0052 28.4621 12.3057 28.0416 12.4831C27.6212 12.6605 27.1587 12.707 26.7124 12.6165C26.2663 12.5261 25.8562 12.3028 25.5344 11.975C25.2128 11.6472 24.9938 11.2295 24.905 10.7748C24.816 10.3201 24.8618 9.84879 25.0358 9.42046C25.2099 8.99214 25.5047 8.62605 25.883 8.36847C26.2614 8.1109 26.7063 7.97345 27.1613 7.97345C27.7713 7.97345 28.3566 8.22042 28.788 8.65999C29.2193 9.09959 29.4617 9.69581 29.4617 10.3175Z" fill="black"/>
            <path d="M18.5919 22.9129C19.5446 22.4283 20.399 21.7657 21.111 20.9595V9.41112C20.3998 8.60386 19.5451 7.94106 18.5919 7.45776V14.611H10.9504V7.51635C10.0027 8.01471 9.15487 8.68913 8.45044 9.50487V15.9042C8.45073 16.0743 8.48329 16.2427 8.54631 16.4003C8.60887 16.5525 8.69857 16.6916 8.81087 16.8105C8.92158 16.9233 9.05151 17.0146 9.19429 17.0801C9.35246 17.1512 9.52369 17.1872 9.69658 17.1855H18.5766L18.5919 22.9129Z" fill="black"/>
          </svg>
          </a>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import KeplrLogo from "@/components/commons/KeplrLogo.vue";
import {computed, onMounted, ref, watch} from "vue";
import {useUserStore} from "@/store/user.store";
import CoinAmount from '@/components/commons/CoinAmount.vue';
import {Field, Form} from "vee-validate";
import {object, string} from "yup";
import i18n from "@/plugins/i18n";
import * as bench32 from "bech32";
import {useConfigurationStore} from "@/store/configuration.store";
import {YupSequentialStringSchema} from "@/utils/yup-utils";
import {useAirDropStore} from "@/store/airDrop.store";
import dataService from "@/services/data.service";

const address = ref();
let errorMessageType = '';

const userLoggedIn = computed(() =>{
  return useUserStore().getAccount.address != '';
});

const airDrops = computed(()=> {
  return useAirDropStore().getAirDropTotal;
});

const totalSum = computed(() => {
  return 0;
});

async function validateAddress(address: string | undefined){
  console.log('validateAddress: ' + address);
  if (!address) {
    errorMessageType = i18n.global.t('CONNECT.ADDRESS_VALIDATION.EMPTY');
    return false;
  }
  try {
    const words = bench32.decode(address);
    if(words?.prefix !== useConfigurationStore().config.addressPrefix && words?.prefix !== 'cosm'){
      console.log('validateAddress: ' + address);
      errorMessageType = i18n.global.t('CONNECT.ADDRESS_VALIDATION.NOT_THIS_NETWORK', {prefix: `${useConfigurationStore().config.addressPrefix} or cosm`});
    }
    return true;
  } catch (err) {
    onWrongAddress(address, String(err));
    return false;
  }
}
const amountSchema = object().shape({
  address: YupSequentialStringSchema([
    string().required(i18n.global.t('CONNECT.ADDRESS_VALIDATION.EMPTY')),
    string().test('validate Address', i18n.global.t('CONNECT.ADDRESS_VALIDATION.NOT_THIS_NETWORK', {prefix: `${useConfigurationStore().config.addressPrefix} or cosm`}), (address: string | undefined) => {
      if (!address) {
        return false;
      } else if(address.startsWith( useConfigurationStore().config.addressPrefix) || address.startsWith('cosmos')){
        return true;
      }
    }),
    string().test('validate Address', i18n.global.t(errorMessageType), validateAddress)
  ])
});

function onWrongAddress(address: string, err: string) {
  console.log(err.slice(7));
  switch (err.slice(7)){
    case address + ' too short' || 'Data too short':
      errorMessageType = i18n.global.t('CONNECT.ADDRESS_VALIDATION.TOO_SHORT');
      break;
    case 'No separator character for '+ address:
      errorMessageType = i18n.global.t('CONNECT.ADDRESS_VALIDATION.SEPARATOR');
      break;
    case 'Invalid checksum for '+ address:
      errorMessageType = i18n.global.t('CONNECT.ADDRESS_VALIDATION.CHECK_SUM');
      break;
    default:
      errorMessageType = i18n.global.t('CONNECT.ADDRESS_VALIDATION.INVALID');
      break;
  }
}

async function submit(){
  await useAirDropStore().fetchAirdropTotal(address.value);
  await useAirDropStore().fetchAirdrop(address.value)
}

onMounted(() => {
  if(useUserStore().getAccount.address != ''){
    address.value = useUserStore().getAccount.address;
    submit()
  }
});

watch(userLoggedIn, () => {
  address.value = useUserStore().getAccount.address;
  submit()
});
</script>

<style scoped lang="scss">
.airDropTotal{
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(calc(100%/ 4), 1fr));
  &__container{
    background-color: white;
    box-shadow: 0 0 4px 4px rgb(0 0 0 / 10%);
    display: flex;
    align-items: center;
    flex-direction: column;
    justify-content: center;
    padding: 0.9em;
    border-radius: 5px;
    grid-area: 1 / 2/ 1 / 4;
    @media (max-width: 1024px) {
      grid-area: 1 /1/ 1 / 5;
    }
  }
  &__hr{
    color: gray;
    font-size: 1.5em;
    align-items: center;
    width: 90%;
    &::after{
      content: attr(data-after);
      color: black;
      opacity: 1;
      position: absolute;
      margin-top: -23px;
      margin-left: -20px;
      background-color: white;
      padding: 5px 20px
    }
  }
  &__head{
    width: 100%;
    align-items: center;
    justify-items: center;
    &-btn{
      border-radius: 5px !important;
    }
    &-hr{
      color: gray;
      font-size: 1.5em;
      align-items: center;
      width: 100%;
    }
  }
  &__form{
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  }
  &-btn{
    width: 100%;
    border-radius: 5px !important;
  }
  &__totalData{
    margin-top: 10px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    h4{
      font-weight: 700;
      font-size: 31px;
      line-height: 38px;
    }
    &-item{
      color: white;
      padding: 1em;
      background-color: #002C50;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    &-amount{
      font-weight: 700;
      font-size: 28px;
      line-height: 34px;
    }
    &-image{

    }
  }
  &__content {
    width: 100%;
    &-items {
      background-color: white;
      box-shadow: 0 0 4px 4px rgb(0 0 0 / 10%);
      display: flex;
      align-items: center;
      flex-direction: column;
      justify-content: space-between;
      padding: 0.9em;
      border-radius: 5px;
      width: 100%;
      margin-top: 5px;
    }
    &-header{
      width: 100%;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
    }
    &-content{
      width: 100%;
      display: flex;
      justify-content: space-between;
    }
  }
  &__footer{
    margin: 15px 0;
    &-icons{
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(calc(100%/ 5), 1fr));
    }
  }
  &__footerIcon{
    cursor: pointer;
    width: 33px;
    height: 25px;
  }

}

</style>
